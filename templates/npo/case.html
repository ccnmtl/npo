{% extends 'base.html' %}
{% block title %}Your cases{% endblock %}
{% block breadcrumbs %}<a href="/">HOME</a> &gt; CASE SUMMARY{% endblock %}

{% block js %}

{% include "bluff.html" %}

{% endblock %}

{% block content %}
<h1>Case: {% if case.name %}{{case.name}}{% else %}{{case.pk}}{% endif %}</h1>
<p>created {{case.created|date}} at {{case.created|time}}</p>
<p>last updated {{case.updated|date}} at {{case.updated|time}}</p>

<form action="delete/" method="post">
<input type="submit" value="Delete this case" />
</form>

<h1>Output summary</h1>

<h2>Rural vs urban population</h2>
<canvas id="g_pop" width="500" height="350"></canvas>
{% include "npo/output/population.html" %}

<hr/>

<h2>Demand</h2>
<canvas id="g_demand" width="500" height="350"></canvas>
<canvas id="g_demand2" width="500" height="350"></canvas>
{% include "npo/output/demand.html" %}

<hr/>

<h2>Total infrastructure count</h2>
{% include "npo/output/count.html" %}

<hr/>

<h2>Systems</h2>
{% include "npo/output/system_count.html" %}
{% include "npo/output/system_summary.html" %}

<h2>Cost breakdown per component</h2>
{% include "npo/output/cost_components.html" %}

<h2>Total cost histograms</h2>

{% for system, counts in cost_histogram_counts.items %}
{% include "npo/output/cost_histograms.html" %}
<canvas id="g_histo{{forloop.counter0}}" width="500" height="350"></canvas>
{% endfor %}

{% endblock %}

{% block endjs %}
<script type="text/javascript">
  var g = new Bluff.Line('g_pop', '500x350');
  g.theme_rails_keynote();
  g.data_from_table('d_pop');
  g.draw();

  var g = new Bluff.Pie('g_demand', '500x350');
  g.theme_rails_keynote();
  g.data_from_table('d_demand');
  g.draw()

  var g = new Bluff.Bar('g_demand2', '500x350');
  g.theme_rails_keynote();
  g.data_from_table('d_demand');
  g.draw();

  var g = new Bluff.Bar('g_histo0', '500x350');
  g.theme_rails_keynote();
  g.sort = false;
  g.hide_legend = true;
  g.data_from_table('d_histo0');
  g.draw();

  var g = new Bluff.Bar('g_histo1', '500x350');
  g.theme_rails_keynote();
  g.sort = false;
  g.hide_legend = true;
  g.data_from_table('d_histo1');
  g.draw();

  var g = new Bluff.Bar('g_histo2', '500x350');
  g.theme_rails_keynote();
  g.sort = false;
  g.hide_legend = true;
  g.data_from_table('d_histo2');
  g.draw();
</script>
{% endblock %}
